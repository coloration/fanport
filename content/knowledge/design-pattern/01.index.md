---
title: 设计原则
index: Knowledege.Design Pattern.Practice
---




## 一. 设计原则

### 1.1 开放-关闭原则

- 类应该对拓展开放，对修改关闭 
- 通常会引入新的抽象层次增加代码的复杂度

### 1.2 最少知识原则 Least Knowledge

- 减少对象之间的交互，只留下必要的东西
- 德墨忒尔法则：Law of Demeter

### 1.3 单一责任 

- 一个类应该只有一个引起变化的原因
- 类的目的，管理某种聚合，尽量让每个类保持单一的责任。
- __内聚(cohesion)__用来度量一个类或模块是否紧密地达到单一目的或责任

### 1.4 要依赖抽象，不要依赖具体类。

- 依赖倒置 Dependency Inversion Principle
  1. 变量不可以持有具体类
  2. 不要让类派生自具体类
  3. 不要覆盖基类中的具体方法

- 不能让高层组件依赖底层组件，这两者都应该依赖于抽象

### 1.5 多用组合，少用继承

- HAS-A(1/n) 比 IS-A(1/1)有更好的适用性


### 1.6 好莱坞原则 dont call us, we'll call you

- 高层组件控制以及如何让低层组件参与，低层组件不可以直接调用高层组件。减少环形依赖


### 1.7 找出应用中可能的变化之处，把他们独立出来，不要和那些不需要变化的代码混合在一起

- _me: 对行为进行抽象的意义大于对属性的抽象_

### 1.8 针对接口编程，而非针对现实编程

### 1.9 为了交互对象的松耦合设计而努力，将对象之间的相互依赖降到最低

- 松耦合的设计之所以能让我们建立有弹性的oo系统，能够应对变化，是因为对象之间的互相依赖降到了最低

## 二. 基本设计模式

- 模式: 在某情境(context)下, 针对某问题的某种解决方案.
  - **情境**就是应用某个模式的情况, 这应该是会不断出现的情况(e.g. 你有一个对象的集合)
  - **问题**就是你想在某情境下达到的目标, 但也可以是某情境下的约束(你需要注意走访每个对象,而且不需理会该集合的实现)
  - **解决方案**就是你所追求的:一个通用的设计,用来解决约束,达到目标.


- 分类
  - 创建型: 创建型模式涉及到将对象实例化, 这类模式都提供一个方法,将客户从所需要实力化的对象中解耦
  - 结构型: 可以让你把类或对象组合到更大得我结构中
  - 行为型: 只要是行为型模式, 都涉及到类和对象何如交互及分配职责

- 类/对象分类
  - 类模式: 描述类之间的关系如何通过继承定义.类模式的关系是在编译时建立的
    - Template Method, Fatory Method, Adapter, Interpreter
  - 对象模式: 描述对象之间的关系,而且主要是利用组合定义.对象模式的关系通常在运行时建立,而且更加动态,更有弹性
